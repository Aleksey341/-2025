<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>Ваше пожелание</title>

  <style>
    :root{
      --bg1:#0a0a20;
      --bg2:#1a1a3a;
      --accent:#ff4f12;
      --text:#ffffff;
      --card: rgba(255,255,255,0.08);
      --card2: rgba(255,255,255,0.12);
    }
    html,body{height:100%;}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 800px at 20% 20%, #2a2a70 0%, transparent 55%),
                  radial-gradient(1200px 800px at 80% 80%, #3a1a70 0%, transparent 55%),
                  linear-gradient(135deg, var(--bg1) 0%, var(--bg2) 55%, var(--bg1) 100%);
      overflow:hidden;
    }
    .wrap{
      position:relative;
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      box-sizing:border-box;
    }
    .card{
      position:relative;
      z-index:5;
      width:min(720px, 100%);
      border-radius:24px;
      background: linear-gradient(180deg, var(--card) 0%, var(--card2) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
      padding:26px 22px;
      text-align:center;
    }
    h1{
      margin:0 0 14px 0;
      font-size: clamp(22px, 3.6vw, 34px);
      font-weight:800;
      letter-spacing: 0.2px;
      text-shadow: 0 0 18px rgba(102,126,234,0.35);
    }
    .wish{
      margin: 10px auto 18px;
      font-size: clamp(18px, 3.2vw, 28px);
      line-height: 1.25;
      font-weight: 700;
      padding: 16px 14px;
      border-radius: 18px;
      background: rgba(0,0,0,0.18);
      border: 1px solid rgba(255,255,255,0.10);
      text-shadow: 0 0 14px rgba(255,79,18,0.25);
      min-height: 90px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .hint{
      opacity:.9;
      font-size: 14px;
      line-height: 1.35;
      margin-top: 6px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      margin-top: 16px;
      padding: 12px 16px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.10);
      color: var(--text);
      font-weight:700;
      cursor:pointer;
      user-select:none;
      transition: transform .15s ease, background .2s ease;
    }
    .btn:active{ transform: scale(0.98); }
    .btn:hover{ background: rgba(255,255,255,0.14); }

    .animate{ animation: pop .35s ease-out; }
    @keyframes pop{
      0%{ transform: translateY(6px); opacity:0; }
      100%{ transform: translateY(0); opacity:1; }
    }

    #snowflakes{
      position:absolute;
      inset:0;
      z-index:1;
      pointer-events:none;
      overflow:hidden;
    }
    .snowflake{
      position:absolute;
      top:-40px;
      opacity:0.55;
      filter: drop-shadow(0 0 6px rgba(255,255,255,0.15));
      font-size: var(--size, 14px);
      animation: fall var(--duration, 10s) linear infinite;
      animation-delay: var(--delay, 0s);
    }
    @keyframes fall{
      0%{ transform: translateY(-40px); }
      100%{ transform: translateY(calc(100vh + 60px)); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div id="snowflakes"></div>

    <div class="card">
      <h1>Ваше пожелание</h1>

      <div id="wishText" class="wish animate">Загружаем пожелание…</div>

      <button class="btn" type="button" onclick="saveScreenshot()">
        Сохранить (скриншот)
      </button>

      <div class="hint">
        Каждый новый заход по ссылке даёт новое пожелание.
        Если вы открываете из камеры — при необходимости нажмите «Открыть в Safari/Chrome».
      </div>
    </div>
  </div>

  <script>
    /* 200 уникальных новогодних пожеланий */
    const wishes = [
      // === РАБОТА И КАРЬЕРА (1-30) ===
      "Пусть работа приносит смысл, а не только задачи.",
      "Пусть каждый день даёт один понятный результат.",
      "Пусть ваши усилия замечают и ценят.",
      "Пусть проекты завершаются вовремя и без авралов.",
      "Пусть рядом будут сильные союзники и надёжные коллеги.",
      "Пусть карьера растёт вместе с вашими амбициями.",
      "Пусть идеи находят поддержку у руководства.",
      "Пусть совещания будут короткими и продуктивными.",
      "Пусть дедлайны не пугают, а мотивируют.",
      "Пусть каждая задача будет по силам.",
      "Пусть рабочий день заканчивается вовремя.",
      "Пусть ваш вклад в команду будет заметен.",
      "Пусть новые навыки осваиваются легко.",
      "Пусть профессиональный рост не останавливается.",
      "Пусть сложные переговоры заканчиваются успехом.",
      "Пусть клиенты будут довольны вашей работой.",
      "Пусть инициативы получают зелёный свет.",
      "Пусть обратная связь будет конструктивной.",
      "Пусть рутина не съедает вдохновение.",
      "Пусть баланс работы и жизни будет здоровым.",
      "Пусть повышение придёт в нужный момент.",
      "Пусть командировки приносят новые знакомства.",
      "Пусть технические проблемы решаются быстро.",
      "Пусть документация всегда будет под рукой.",
      "Пусть стресс обходит вас стороной.",
      "Пусть коллеги станут друзьями.",
      "Пусть рабочее место будет комфортным.",
      "Пусть ваш опыт ценится на вес золота.",
      "Пусть новые возможности открываются сами.",
      "Пусть работа вдохновляет на большее.",

      // === ФИНАНСЫ И БЛАГОПОЛУЧИЕ (31-60) ===
      "Пусть деньги приходят регулярно и в достатке.",
      "Пусть доход растёт быстрее расходов.",
      "Пусть финансовая подушка становится толще.",
      "Пусть неожиданные траты будут приятными.",
      "Пусть инвестиции приносят плоды.",
      "Пусть кредиты закрываются досрочно.",
      "Пусть скидки находят вас сами.",
      "Пусть премии радуют в конце квартала.",
      "Пусть цены не кусаются.",
      "Пусть финансовая грамотность растёт.",
      "Пусть накопления приумножаются.",
      "Пусть важные покупки даются легко.",
      "Пусть бюджет всегда сходится.",
      "Пусть долги остаются в прошлом.",
      "Пусть щедрость возвращается сторицей.",
      "Пусть материальные цели достигаются.",
      "Пусть кошелёк никогда не пустует.",
      "Пусть выгодные предложения приходят вовремя.",
      "Пусть пассивный доход становится активным.",
      "Пусть финансовая свобода приближается.",
      "Пусть зарплата соответствует ожиданиям.",
      "Пусть бонусы превышают план.",
      "Пусть деньги работают на вас.",
      "Пусть расходы будут осознанными.",
      "Пусть сбережения радуют цифрами.",
      "Пусть финансовые решения будут мудрыми.",
      "Пусть достаток входит в привычку.",
      "Пусть изобилие станет нормой.",
      "Пусть щедрость не знает границ.",
      "Пусть материальное благополучие укрепляется.",

      // === СЕМЬЯ И БЛИЗКИЕ (61-90) ===
      "Пусть дом будет местом силы и покоя.",
      "Пусть семья будет спокойным тылом.",
      "Пусть близкие будут здоровы и счастливы.",
      "Пусть родители радуют долголетием.",
      "Пусть дети растут умными и добрыми.",
      "Пусть любовь крепнет с каждым днём.",
      "Пусть взаимопонимание царит в доме.",
      "Пусть семейные традиции сохраняются.",
      "Пусть праздники собирают всех вместе.",
      "Пусть конфликты разрешаются мирно.",
      "Пусть поддержка близких будет безусловной.",
      "Пусть общие воспоминания множатся.",
      "Пусть домашний уют согревает.",
      "Пусть родственники живут в согласии.",
      "Пусть семейный очаг горит ярко.",
      "Пусть дети радуют успехами.",
      "Пусть супруг понимает с полуслова.",
      "Пусть родительский дом всегда ждёт.",
      "Пусть бабушки и дедушки будут рядом.",
      "Пусть братья и сёстры будут друзьями.",
      "Пусть семейные ужины станут традицией.",
      "Пусть любовь не требует слов.",
      "Пусть забота будет взаимной.",
      "Пусть дом наполняется смехом.",
      "Пусть близкие ценят ваше время.",
      "Пусть семья будет опорой в трудности.",
      "Пусть родные гордятся вами.",
      "Пусть дети наследуют лучшее.",
      "Пусть семейное счастье приумножается.",
      "Пусть любовь близких будет безграничной.",

      // === ЗДОРОВЬЕ И ЭНЕРГИЯ (91-120) ===
      "Пусть здоровье будет крепким как никогда.",
      "Пусть энергии хватает на всё важное.",
      "Пусть сон будет глубоким и восстанавливающим.",
      "Пусть иммунитет работает на отлично.",
      "Пусть болезни обходят стороной.",
      "Пусть тело радует силой и гибкостью.",
      "Пусть врачи нужны только для профилактики.",
      "Пусть хронические недуги отступают.",
      "Пусть аппетит будет здоровым.",
      "Пусть спорт станет привычкой.",
      "Пусть усталость не накапливается.",
      "Пусть стресс не влияет на здоровье.",
      "Пусть анализы всегда радуют.",
      "Пусть давление будет в норме.",
      "Пусть спина не напоминает о себе.",
      "Пусть зрение остаётся острым.",
      "Пусть память не подводит.",
      "Пусть суставы работают как часы.",
      "Пусть пищеварение будет идеальным.",
      "Пусть кожа сияет здоровьем.",
      "Пусть волосы будут густыми.",
      "Пусть зубы не требуют лечения.",
      "Пусть сердце бьётся ровно.",
      "Пусть дыхание будет лёгким.",
      "Пусть нервы будут крепкими.",
      "Пусть выносливость растёт.",
      "Пусть организм восстанавливается быстро.",
      "Пусть витаминов хватает.",
      "Пусть тело слушается вас.",
      "Пусть здоровый образ жизни приносит радость.",

      // === УДАЧА И ВЕЗЕНИЕ (121-150) ===
      "Пусть Новый год принесёт удачу во всём.",
      "Пусть год подарит неожиданные возможности.",
      "Пусть мечты становятся реальностью.",
      "Пусть вы гордитесь собой чаще.",
      "Пусть вам везёт по-крупному.",
      "Пусть удача будет вашим постоянным спутником.",
      "Пусть всё важное складывается идеально.",
      "Пусть год будет самым счастливым.",
      "Пусть звёзды складываются в вашу пользу.",
      "Пусть случайности работают на вас.",
      "Пусть нужные люди появляются вовремя.",
      "Пусть двери открываются легко.",
      "Пусть препятствия становятся трамплинами.",
      "Пусть риски оправдываются.",
      "Пусть интуиция не подводит.",
      "Пусть знаки судьбы будут понятны.",
      "Пусть шансы не упускаются.",
      "Пусть фортуна улыбается чаще.",
      "Пусть удачные совпадения множатся.",
      "Пусть позитив притягивает позитив.",
      "Пусть жизнь преподносит приятные сюрпризы.",
      "Пусть везение станет нормой.",
      "Пусть всё получается с первого раза.",
      "Пусть планы реализуются без помех.",
      "Пусть путь будет освещён удачей.",
      "Пусть карма работает в вашу пользу.",
      "Пусть обстоятельства складываются идеально.",
      "Пусть нужное находится быстро.",
      "Пусть время всегда будет на вашей стороне.",
      "Пусть жизнь радует каждый день.",

      // === ЛИЧНОСТНЫЙ РОСТ (151-175) ===
      "Пусть каждый день приносит новые знания.",
      "Пусть мудрость приходит с опытом.",
      "Пусть ошибки становятся уроками.",
      "Пусть страхи отступают перед решимостью.",
      "Пусть уверенность в себе крепнет.",
      "Пусть границы комфорта расширяются.",
      "Пусть новые хобби приносят радость.",
      "Пусть книги открывают новые миры.",
      "Пусть языки даются легко.",
      "Пусть творчество находит выход.",
      "Пусть дисциплина становится привычкой.",
      "Пусть фокус не теряется.",
      "Пусть прокрастинация отступает.",
      "Пусть цели становятся достижениями.",
      "Пусть вдохновение не покидает.",
      "Пусть таланты раскрываются полностью.",
      "Пусть потенциал реализуется.",
      "Пусть самооценка будет здоровой.",
      "Пусть принятие себя будет полным.",
      "Пусть внутренний критик молчит.",
      "Пусть рост не останавливается.",
      "Пусть развитие приносит удовольствие.",
      "Пусть знания применяются на практике.",
      "Пусть опыт конвертируется в мудрость.",
      "Пусть каждый год делает вас лучше.",

      // === ОТНОШЕНИЯ И ДРУЖБА (176-200) ===
      "Пусть настоящие друзья будут рядом.",
      "Пусть новые знакомства перерастают в дружбу.",
      "Пусть общение приносит радость.",
      "Пусть люди тянутся к вам.",
      "Пусть доверие будет взаимным.",
      "Пусть конфликты разрешаются быстро.",
      "Пусть обиды не накапливаются.",
      "Пусть прощение даётся легко.",
      "Пусть благодарность будет искренней.",
      "Пусть комплименты звучат чаще.",
      "Пусть помощь приходит вовремя.",
      "Пусть одиночество не тревожит.",
      "Пусть круг общения расширяется.",
      "Пусть токсичные люди уходят сами.",
      "Пусть границы уважаются.",
      "Пусть эмпатия не иссякает.",
      "Пусть споры заканчиваются миром.",
      "Пусть совместные планы реализуются.",
      "Пусть встречи будут тёплыми.",
      "Пусть расставания будут лёгкими.",
      "Пусть люди видят в вас лучшее.",
      "Пусть вы вдохновляете других.",
      "Пусть ваша энергия заражает позитивом.",
      "Пусть связи крепнут с годами.",
      "Пусть каждый человек в жизни будет к месту."
    ];

    function $(id){ return document.getElementById(id); }

    // Безопасный sessionStorage (только для того, чтобы не повторять подряд в рамках вкладки)
    function getSessionSafe(){
      try{
        const t='__ss_test__';
        window.sessionStorage.setItem(t,'1');
        window.sessionStorage.removeItem(t);
        return window.sessionStorage;
      }catch(e){
        return null;
      }
    }

    // Крипто-рандом (если доступен), иначе Math.random
    function randomInt(maxExclusive){
      if (maxExclusive <= 0) return 0;

      try{
        if (window.crypto && window.crypto.getRandomValues){
          const arr = new Uint32Array(1);
          window.crypto.getRandomValues(arr);
          return arr[0] % maxExclusive;
        }
      }catch(e){
        // fallback ниже
      }
      return Math.floor(Math.random() * maxExclusive);
    }

    function showWish(text){
      const el = $('wishText');
      if(!el) return;
      el.classList.remove('animate');
      el.textContent = text;
      void el.offsetWidth;
      el.classList.add('animate');
    }

    function showError(msg){
      showWish(`Не удалось показать пожелание. ${msg}`);
    }

    function createSnowflakes(){
      const c = $('snowflakes');
      if(!c) return;
      c.innerHTML = '';
      const chars = ['❄','❅','❆','✻','✼'];
      for(let i=0;i<30;i++){
        const fl = document.createElement('div');
        fl.className = 'snowflake';
        fl.textContent = chars[Math.floor(Math.random()*chars.length)];
        fl.style.left = (Math.random()*100) + '%';
        fl.style.setProperty('--size', (10 + Math.random()*15) + 'px');
        fl.style.setProperty('--duration', (8 + Math.random()*10) + 's');
        fl.style.setProperty('--delay', (Math.random()*10) + 's');
        c.appendChild(fl);
      }
    }

    function saveScreenshot(){
      alert('Сделайте скриншот стандартным способом на телефоне, чтобы сохранить пожелание.');
    }
    window.saveScreenshot = saveScreenshot;

    function pickNewWish(){
      const n = wishes.length;
      if (n === 0) return null;

      const ss = getSessionSafe();
      let last = null;

      if (ss){
        try{
          const v = ss.getItem('lastWishIndex');
          if (v !== null) last = parseInt(v, 10);
        }catch(e){}
      }

      // Пытаемся избежать мгновенного повтора подряд (до 5 попыток)
      let idx = randomInt(n);
      if (n > 1 && Number.isInteger(last)){
        for (let tries = 0; tries < 5 && idx === last; tries++){
          idx = randomInt(n);
        }
      }

      if (ss){
        try{ ss.setItem('lastWishIndex', String(idx)); }catch(e){}
      }

      return wishes[idx];
    }

    function init(){
      try{
        if(!Array.isArray(wishes) || wishes.length === 0){
          showError('Список пожеланий пуст.');
          return;
        }

        createSnowflakes();

        const wish = pickNewWish();
        if (!wish){
          showError('Не удалось выбрать пожелание.');
          return;
        }

        showWish(wish);
      }catch(e){
        console.error(e);
        showError('Обновите страницу.');
      }
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
